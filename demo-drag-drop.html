<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Builder v·ªõi Drag & Drop</title>
    
    <!-- WordPress Admin Styles -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/dashicons/0.9.0/dashicons.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            margin: 20px;
            background: #f1f1f1;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: #fff;
            border-radius: 4px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.13);
        }
        
        h1 {
            background: #23282d;
            color: #fff;
            margin: 0;
            padding: 20px;
            border-radius: 4px 4px 0 0;
        }
        
        .form-builder-wrapper {
            padding: 20px;
        }
        
        /* Import our form builder styles */
    </style>
    <link rel="stylesheet" href="assets/css/form-builder-bpmn.css">
</head>
<body>
    <div class="container">
        <h1>üéØ Form Builder v·ªõi Drag & Drop v√† Chia C·ªôt</h1>
        
        <div class="form-builder-wrapper">
            <div id="form-builder-container">
                <!-- Form builder s·∫Ω ƒë∆∞·ª£c t·∫°o ·ªü ƒë√¢y -->
            </div>
        </div>
        
        <div style="padding: 20px; border-top: 1px solid #ccd0d4; background: #f9f9f9;">
            <h3>üìã H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng m·ªõi:</h3>
            <ol>
                <li><strong>üèóÔ∏è B∆∞·ªõc 1:</strong> K√©o "Row Layout" t·ª´ panel b√™n tr√°i v√†o canvas ƒë·ªÉ t·∫°o h√†ng</li>
                <li><strong>‚öôÔ∏è B∆∞·ªõc 2:</strong> Tu·ª≥ ch·ªânh s·ªë c·ªôt b·∫±ng n√∫t "+Col/-Col" khi hover v√†o h√†ng</li>
                <li><strong>üìù B∆∞·ªõc 3:</strong> K√©o "Form Fields" v√†o t·ª´ng c·ªôt</li>
                <li><strong>üîß T√≠nh nƒÉng n√¢ng cao:</strong>
                    <ul>
                        <li>K√©o h√†ng ƒë·ªÉ s·∫Øp x·∫øp l·∫°i th·ª© t·ª± (drag handle ·ªü b√™n tr√°i)</li>
                        <li>K√©o field gi·ªØa c√°c c·ªôt</li>
                        <li>Thay ƒë·ªïi k√≠ch th∆∞·ªõc c·ªôt b·∫±ng dropdown</li>
                        <li>Resize c·ªôt b·∫±ng c√°ch k√©o border</li>
                        <li>Collapse/expand sections trong palette</li>
                    </ul>
                </li>
            </ol>
            
            <div style="background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 4px; padding: 15px; margin-top: 15px;">
                <strong>üí° M·∫πo:</strong> Logic m·ªõi n√†y cho ph√©p b·∫°n t·∫°o layout ph·ª©c t·∫°p h∆°n v·ªõi m·ªói h√†ng c√≥ th·ªÉ c√≥ s·ªë c·ªôt kh√°c nhau!
            </div>
        </div>
    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    
    <!-- Mock AJAX data for demo -->
    <script>
        window.liftAjax = {
            ajaxurl: '#',
            nonce: 'demo-nonce',
            pluginUrl: '.'
        };
    </script>
    
    <!-- Our form builder script -->
    <script src="assets/js/form-builder-bpmn.js"></script>
    
    <script>
        // Initialize when DOM ready
        $(document).ready(function() {
            // Create the initial HTML structure v·ªõi logic m·ªõi
            const builderHTML = `
                <div class="modern-form-builder">
                    <div class="form-builder-palette">
                        <!-- Row Layouts Section -->
                        <div class="palette-section">
                            <div class="palette-header" data-section="rows">
                                <h3>üèóÔ∏è Row Layouts</h3>
                                <span class="palette-toggle">‚ñº</span>
                            </div>
                            <div class="palette-content">
                                <div class="row-layout-buttons">
                                    <button type="button" class="row-layout-btn draggable" data-type="row" data-columns="1" draggable="true">
                                        <span class="dashicons dashicons-editor-justify"></span> Single Column Row
                                    </button>
                                    <button type="button" class="row-layout-btn draggable" data-type="row" data-columns="2" draggable="true">
                                        <span class="dashicons dashicons-columns"></span> Two Column Row
                                    </button>
                                    <button type="button" class="row-layout-btn draggable" data-type="row" data-columns="3" draggable="true">
                                        <span class="dashicons dashicons-grid-view"></span> Three Column Row
                                    </button>
                                    <button type="button" class="row-layout-btn draggable" data-type="row" data-columns="4" draggable="true">
                                        <span class="dashicons dashicons-screenoptions"></span> Four Column Row
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Field Elements Section -->
                        <div class="palette-section">
                            <div class="palette-header" data-section="fields">
                                <h3>üìù Form Fields</h3>
                                <span class="palette-toggle">‚ñº</span>
                            </div>
                            <div class="palette-content">
                                <div class="field-type-buttons">
                                    <button type="button" class="field-type-btn draggable" data-type="text" draggable="true">
                                        <span class="dashicons dashicons-editor-textcolor"></span> Text
                                    </button>
                                    <button type="button" class="field-type-btn draggable" data-type="textarea" draggable="true">
                                        <span class="dashicons dashicons-editor-paragraph"></span> Textarea
                                    </button>
                                    <button type="button" class="field-type-btn draggable" data-type="select" draggable="true">
                                        <span class="dashicons dashicons-menu-alt"></span> Select
                                    </button>
                                    <button type="button" class="field-type-btn draggable" data-type="radio" draggable="true">
                                        <span class="dashicons dashicons-marker"></span> Radio
                                    </button>
                                    <button type="button" class="field-type-btn draggable" data-type="checkbox" draggable="true">
                                        <span class="dashicons dashicons-yes"></span> Checkbox
                                    </button>
                                    <button type="button" class="field-type-btn draggable" data-type="email" draggable="true">
                                        <span class="dashicons dashicons-email"></span> Email
                                    </button>
                                    <button type="button" class="field-type-btn draggable" data-type="number" draggable="true">
                                        <span class="dashicons dashicons-calculator"></span> Number
                                    </button>
                                    <button type="button" class="field-type-btn draggable" data-type="date" draggable="true">
                                        <span class="dashicons dashicons-calendar-alt"></span> Date
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-builder-canvas">
                        <div class="form-builder-header">
                            <h3>üé® Form Canvas</h3>
                            <div class="builder-actions">
                                <button type="button" class="button button-primary" id="preview-form">Preview</button>
                                <button type="button" class="button button-secondary" id="clear-form">Clear All</button>
                            </div>
                        </div>
                        
                        <div class="form-fields-area">
                            <div id="form-fields-list">
                                <div class="no-fields-message">
                                    <p>üöÄ Drag row layouts here first, then add fields to columns!</p>
                                    <p>üí° Step 1: Drag a row layout from the left panel</p>
                                    <p>üí° Step 2: Customize columns if needed</p>
                                    <p>üí° Step 3: Drag form fields into columns</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            $('#form-builder-container').html(builderHTML);
            
            // Initialize the form builder manually since we're not using the full plugin
            setTimeout(function() {
                // Simulate the form builder initialization
                if (typeof window.createSimpleFormBuilder !== 'undefined') {
                    // The functions are already bound via the included JS file
                    console.log('Form builder initialized successfully with new drag & drop logic!');
                }
            }, 100);
        });
    </script>
</body>
</html>
